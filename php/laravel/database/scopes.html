<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Scopes | Mimis K</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="CheatSheet">
    
    <link rel="preload" href="/snippets/assets/css/0.styles.1e73b5f7.css" as="style"><link rel="preload" href="/snippets/assets/js/app.b11af655.js" as="script"><link rel="preload" href="/snippets/assets/js/2.95ae72b9.js" as="script"><link rel="preload" href="/snippets/assets/js/1.4bee94c0.js" as="script"><link rel="preload" href="/snippets/assets/js/62.0af441dd.js" as="script"><link rel="prefetch" href="/snippets/assets/js/10.f6921cd1.js"><link rel="prefetch" href="/snippets/assets/js/11.8b1107ef.js"><link rel="prefetch" href="/snippets/assets/js/12.682de53f.js"><link rel="prefetch" href="/snippets/assets/js/13.3dee2393.js"><link rel="prefetch" href="/snippets/assets/js/14.04a3dffe.js"><link rel="prefetch" href="/snippets/assets/js/15.2afa183f.js"><link rel="prefetch" href="/snippets/assets/js/16.1fb096cd.js"><link rel="prefetch" href="/snippets/assets/js/17.51642933.js"><link rel="prefetch" href="/snippets/assets/js/18.75b95481.js"><link rel="prefetch" href="/snippets/assets/js/19.b3b0e005.js"><link rel="prefetch" href="/snippets/assets/js/20.319f7984.js"><link rel="prefetch" href="/snippets/assets/js/21.298ad4a6.js"><link rel="prefetch" href="/snippets/assets/js/22.e9004e12.js"><link rel="prefetch" href="/snippets/assets/js/23.cc711f3f.js"><link rel="prefetch" href="/snippets/assets/js/24.75fd8ab7.js"><link rel="prefetch" href="/snippets/assets/js/25.37c95571.js"><link rel="prefetch" href="/snippets/assets/js/26.621bf206.js"><link rel="prefetch" href="/snippets/assets/js/27.affcc92f.js"><link rel="prefetch" href="/snippets/assets/js/28.2b4eec3d.js"><link rel="prefetch" href="/snippets/assets/js/29.72add480.js"><link rel="prefetch" href="/snippets/assets/js/3.0f93d13b.js"><link rel="prefetch" href="/snippets/assets/js/30.7f6a1eab.js"><link rel="prefetch" href="/snippets/assets/js/31.6cae989c.js"><link rel="prefetch" href="/snippets/assets/js/32.71cbd662.js"><link rel="prefetch" href="/snippets/assets/js/33.25961b77.js"><link rel="prefetch" href="/snippets/assets/js/34.a6995060.js"><link rel="prefetch" href="/snippets/assets/js/35.704bd094.js"><link rel="prefetch" href="/snippets/assets/js/36.647b2e69.js"><link rel="prefetch" href="/snippets/assets/js/37.77345358.js"><link rel="prefetch" href="/snippets/assets/js/38.5c332d77.js"><link rel="prefetch" href="/snippets/assets/js/39.a9ef7d3d.js"><link rel="prefetch" href="/snippets/assets/js/4.ba20a71a.js"><link rel="prefetch" href="/snippets/assets/js/40.95666832.js"><link rel="prefetch" href="/snippets/assets/js/41.7cb6da72.js"><link rel="prefetch" href="/snippets/assets/js/42.86becfb1.js"><link rel="prefetch" href="/snippets/assets/js/43.069d7dcf.js"><link rel="prefetch" href="/snippets/assets/js/44.3343010b.js"><link rel="prefetch" href="/snippets/assets/js/45.6ea3c0f7.js"><link rel="prefetch" href="/snippets/assets/js/46.f5cc9435.js"><link rel="prefetch" href="/snippets/assets/js/47.68e90b4b.js"><link rel="prefetch" href="/snippets/assets/js/48.3233a1e7.js"><link rel="prefetch" href="/snippets/assets/js/49.e7078631.js"><link rel="prefetch" href="/snippets/assets/js/5.5f56e599.js"><link rel="prefetch" href="/snippets/assets/js/50.816a1017.js"><link rel="prefetch" href="/snippets/assets/js/51.4d5fa3c5.js"><link rel="prefetch" href="/snippets/assets/js/52.bc4ea352.js"><link rel="prefetch" href="/snippets/assets/js/53.03fb540a.js"><link rel="prefetch" href="/snippets/assets/js/54.6c274739.js"><link rel="prefetch" href="/snippets/assets/js/55.878158b4.js"><link rel="prefetch" href="/snippets/assets/js/56.d9aae055.js"><link rel="prefetch" href="/snippets/assets/js/57.8d119aa2.js"><link rel="prefetch" href="/snippets/assets/js/58.be26d720.js"><link rel="prefetch" href="/snippets/assets/js/59.eef38d5e.js"><link rel="prefetch" href="/snippets/assets/js/6.7eac5493.js"><link rel="prefetch" href="/snippets/assets/js/60.1b930b8d.js"><link rel="prefetch" href="/snippets/assets/js/61.0a9c3137.js"><link rel="prefetch" href="/snippets/assets/js/63.d9482bbf.js"><link rel="prefetch" href="/snippets/assets/js/64.9859e11f.js"><link rel="prefetch" href="/snippets/assets/js/65.8346239b.js"><link rel="prefetch" href="/snippets/assets/js/66.a9350fba.js"><link rel="prefetch" href="/snippets/assets/js/67.912fe76e.js"><link rel="prefetch" href="/snippets/assets/js/68.92f2f613.js"><link rel="prefetch" href="/snippets/assets/js/69.c52a598c.js"><link rel="prefetch" href="/snippets/assets/js/7.a44acbec.js"><link rel="prefetch" href="/snippets/assets/js/70.7bf9c0c5.js"><link rel="prefetch" href="/snippets/assets/js/71.610f9d30.js"><link rel="prefetch" href="/snippets/assets/js/72.a533b309.js"><link rel="prefetch" href="/snippets/assets/js/73.47a7017a.js"><link rel="prefetch" href="/snippets/assets/js/74.884175d4.js"><link rel="prefetch" href="/snippets/assets/js/75.7e90906b.js"><link rel="prefetch" href="/snippets/assets/js/76.8649163b.js"><link rel="prefetch" href="/snippets/assets/js/77.7e6587b3.js"><link rel="prefetch" href="/snippets/assets/js/78.48fe1417.js"><link rel="prefetch" href="/snippets/assets/js/79.e023bfd2.js"><link rel="prefetch" href="/snippets/assets/js/80.9a1ad9d6.js"><link rel="prefetch" href="/snippets/assets/js/81.54ffdbea.js"><link rel="prefetch" href="/snippets/assets/js/82.ea0fc47d.js"><link rel="prefetch" href="/snippets/assets/js/83.38b0159b.js"><link rel="prefetch" href="/snippets/assets/js/84.a8e634de.js"><link rel="prefetch" href="/snippets/assets/js/85.08e1828f.js"><link rel="prefetch" href="/snippets/assets/js/86.e63b026c.js"><link rel="prefetch" href="/snippets/assets/js/87.68f8125d.js"><link rel="prefetch" href="/snippets/assets/js/88.5370b1cf.js"><link rel="prefetch" href="/snippets/assets/js/89.9c9cd8a1.js"><link rel="prefetch" href="/snippets/assets/js/90.b6ff9af1.js"><link rel="prefetch" href="/snippets/assets/js/91.8adfefd2.js"><link rel="prefetch" href="/snippets/assets/js/92.1fd67fc7.js"><link rel="prefetch" href="/snippets/assets/js/vendors~docsearch.969cea78.js">
    <link rel="stylesheet" href="/snippets/assets/css/0.styles.1e73b5f7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/snippets/" class="home-link router-link-active"><!----> <span class="site-name">Mimis K</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/snippets/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/snippets/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PHP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/snippets/php/laravel/" class="sidebar-heading clickable router-link-active open"><span>Laravel</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/snippets/php/laravel/database/" class="sidebar-heading clickable router-link-active open"><span>Database</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/snippets/php/laravel/database/model.html" class="sidebar-link">Model</a></li><li><a href="/snippets/php/laravel/database/scopes.html" aria-current="page" class="active sidebar-link">Scopes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/snippets/php/laravel/database/scopes.html#local-scopes" class="sidebar-link">Local Scopes</a></li><li class="sidebar-sub-header"><a href="/snippets/php/laravel/database/scopes.html#global-scopes" class="sidebar-link">Global Scopes</a></li><li class="sidebar-sub-header"><a href="/snippets/php/laravel/database/scopes.html#dynamic-scopes" class="sidebar-link">Dynamic Scopes</a></li><li class="sidebar-sub-header"><a href="/snippets/php/laravel/database/scopes.html#utilizing-laravel-scope-for-security" class="sidebar-link">Utilizing Laravel Scope for Security</a></li><li class="sidebar-sub-header"><a href="/snippets/php/laravel/database/scopes.html#best-practices-for-laravel-scope-usage" class="sidebar-link">Best Practices for Laravel Scope Usage</a></li><li class="sidebar-sub-header"><a href="/snippets/php/laravel/database/scopes.html#snippets" class="sidebar-link">Snippets</a></li><li class="sidebar-sub-header"><a href="/snippets/php/laravel/database/scopes.html#new" class="sidebar-link">New</a></li></ul></li><li><a href="/snippets/php/laravel/database/queries.html" class="sidebar-link">Queries</a></li><li><a href="/snippets/php/laravel/database/migrations.html" class="sidebar-link">Migrations</a></li><li><a href="/snippets/php/laravel/database/factories.html" class="sidebar-link">Factories</a></li><li><a href="/snippets/php/laravel/database/seeders.html" class="sidebar-link">Seeders</a></li><li><a href="/snippets/php/laravel/database/observer.html" class="sidebar-link">Observer</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/snippets/php/laravel/relationships/" class="sidebar-heading clickable"><span>Relationships</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/snippets/php/laravel/traits/" class="sidebar-heading clickable"><span>Traits</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/snippets/php/laravel/controller.html" class="sidebar-link">Controller</a></li><li><a href="/snippets/php/laravel/policies.html" class="sidebar-link">Policies</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/snippets/php/laravel/validation/" class="sidebar-heading clickable"><span>Validation</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/snippets/php/laravel/enums.html" class="sidebar-link">Enums</a></li><li><a href="/snippets/php/laravel/routes.html" class="sidebar-link">Routes</a></li><li><a href="/snippets/php/laravel/views.html" class="sidebar-link">Views</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/snippets/php/laravel/blade/" class="sidebar-heading clickable"><span>Blade</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/snippets/php/laravel/testing/" class="sidebar-heading clickable"><span>Testing</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/snippets/php/laravel/tinker/" class="sidebar-link">Tinker</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/snippets/php/laravel/package-development/" class="sidebar-heading clickable"><span>Package Development</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/snippets/php/laravel/packages/" class="sidebar-heading clickable"><span>Packages</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nova</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Livewire</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Other</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTMX</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Draft</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="scopes"><a href="#scopes" class="header-anchor">#</a> Scopes</h1> <p></p><div class="table-of-contents"><ul><li><a href="#local-scopes">Local Scopes</a><ul><li><a href="#examples">Examples:</a></li></ul></li><li><a href="#global-scopes">Global Scopes</a><ul><li><a href="#examples">Examples:</a></li></ul></li><li><a href="#dynamic-scopes">Dynamic Scopes</a><ul><li><a href="#example">Example</a></li></ul></li><li><a href="#utilizing-laravel-scope-for-security">Utilizing Laravel Scope for Security</a><ul><li><a href="#example">Example</a></li></ul></li><li><a href="#best-practices-for-laravel-scope-usage">Best Practices for Laravel Scope Usage</a><ul><li><a href="#example">Example</a></li></ul></li><li><a href="#snippets">Snippets</a><ul><li><a href="#usage">Usage</a></li></ul></li><li><a href="#new">New</a><ul><li><a href="#before">Before</a></li><li><a href="#after-v12-x">After v12.x</a></li></ul></li></ul></div><p></p> <h2 id="local-scopes"><a href="#local-scopes" class="header-anchor">#</a> Local Scopes</h2> <p>Local scopes allow you to encapsulate common query logic directly within your Laravel Eloquent models.
By creating local scopes, you can easily apply specific constraints to your database queries, making your code more readable and maintainable.</p> <h3 id="examples"><a href="#examples" class="header-anchor">#</a> Examples:</h3> <p>Scope by Status: Implement a local scope to retrieve only active users from the database.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// User.php (Eloquent Model)</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeActive</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'status'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'active'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$activeUsers</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Scope by Category: Create a scope to fetch products belonging to a specific category.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Product.php (Eloquent Model)</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeByCategory</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$categoryId</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'category_id'</span><span class="token punctuation">,</span> <span class="token variable">$categoryId</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$categoryProducts</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">byCategory</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Scope with Parameters: Develop a scope to filter results based on user-defined criteria like date ranges.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Post.php (Eloquent Model)</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopePublishedBetween</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$startDate</span><span class="token punctuation">,</span> <span class="token variable">$endDate</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">whereBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'published_at'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">$startDate</span><span class="token punctuation">,</span> <span class="token variable">$endDate</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$postsBetweenDates</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">publishedBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'2023-01-01'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'2023-07-31'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="global-scopes"><a href="#global-scopes" class="header-anchor">#</a> Global Scopes</h2> <p>Global scopes are automatically applied to all queries on a specific Eloquent model.
They are excellent tools for defining universal restrictions and ensuring consistency throughout your application.</p> <h3 id="examples-2"><a href="#examples-2" class="header-anchor">#</a> Examples:</h3> <p>Global Scope for Multi-Tenancy: Set up a global scope to retrieve data specific to a particular tenant in a multi-tenant application.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// TenantScope.php (Global Scope)</span>

<span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">booted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword static-context">static</span><span class="token operator">::</span><span class="token function">addGlobalScope</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tenant'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Builder</span> <span class="token variable">$builder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$builder</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tenant_id'</span><span class="token punctuation">,</span> <span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">tenant_id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$tenantPosts</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Automatically filtered for the authenticated user's tenant</span>
</code></pre></div><p>Soft Deleting with Global Scope: Implement a global scope to automatically filter out soft-deleted records from all queries.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// SoftDeletingScope.php (Global Scope)</span>

<span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">booted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword static-context">static</span><span class="token operator">::</span><span class="token function">addGlobalScope</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'soft_delete'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Builder</span> <span class="token variable">$builder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$builder</span><span class="token operator">-&gt;</span><span class="token function">whereNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'deleted_at'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$activePosts</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Excludes soft-deleted posts</span>
</code></pre></div><h2 id="dynamic-scopes"><a href="#dynamic-scopes" class="header-anchor">#</a> Dynamic Scopes</h2> <p>Dynamic scopes offer the ability to create versatile query constraints that accept parameters during runtime. This flexibility enhances the adaptability and power of your database queries.</p> <h3 id="example"><a href="#example" class="header-anchor">#</a> Example</h3> <p>Filtering Products by Price: Create a dynamic scope that allows users to filter products based on price ranges.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Product.php (Eloquent Model)</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopePriceRange</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$minPrice</span><span class="token punctuation">,</span> <span class="token variable">$maxPrice</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">whereBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'price'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">$minPrice</span><span class="token punctuation">,</span> <span class="token variable">$maxPrice</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$affordableProducts</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">priceRange</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Sorting Records Dynamically: Implement a dynamic scope that enables users to sort records based on different criteria.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Post.php (Eloquent Model)</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeSortBy</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$column</span><span class="token punctuation">,</span> <span class="token variable">$direction</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'asc'</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token variable">$column</span><span class="token punctuation">,</span> <span class="token variable">$direction</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$sortedPosts</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">sortBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'desc'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="utilizing-laravel-scope-for-security"><a href="#utilizing-laravel-scope-for-security" class="header-anchor">#</a> Utilizing Laravel Scope for Security</h2> <p>Laravel Scopes can play a pivotal role in enhancing the security of your application.
By controlling data access and permissions, you can bolster your app’s protection against unauthorized access.</p> <h3 id="example-2"><a href="#example-2" class="header-anchor">#</a> Example</h3> <p>Securing User Profiles: Develop a scope that restricts access to user profiles, allowing only the profile owner or admin to view sensitive information.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// UserProfile.php (Eloquent Model)</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeAccessibleByUser</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$userId</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$userId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user_id'</span><span class="token punctuation">,</span> <span class="token variable">$userId</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orWhere</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'is_public'</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$userProfile</span> <span class="token operator">=</span> <span class="token class-name static-context">UserProfile</span><span class="token operator">::</span><span class="token function">accessibleByUser</span><span class="token punctuation">(</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Permissions Management: Create a scope to manage user permissions and access rights to specific resources.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Resource.php (Eloquent Model)</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeAccessibleByRole</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$role</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'required_role'</span><span class="token punctuation">,</span> <span class="token variable">$role</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$accessibleResources</span> <span class="token operator">=</span> <span class="token class-name static-context">Resource</span><span class="token operator">::</span><span class="token function">accessibleByRole</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'admin'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="best-practices-for-laravel-scope-usage"><a href="#best-practices-for-laravel-scope-usage" class="header-anchor">#</a> Best Practices for Laravel Scope Usage</h2> <p>To make the most of Laravel Scopes, it’s essential to follow best practices that ensure maintainable and efficient code.</p> <h3 id="example-3"><a href="#example-3" class="header-anchor">#</a> Example</h3> <p>Scope Reusability: Illustrate the benefits of reusable scopes and how they contribute to a cleaner codebase.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Post.php (Eloquent Model)</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopePublished</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'published'</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeFeatured</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'featured'</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$featuredPosts</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">published</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">featured</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Avoiding Overly Complex Scopes: Demonstrate the importance of keeping scopes simple and focused to prevent potential issues.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Order.php (Eloquent Model)</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeShippedWithinDays</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$days</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">whereDate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'shipped_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;='</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">subDays</span><span class="token punctuation">(</span><span class="token variable">$days</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage:</span>
<span class="token variable">$recentOrders</span> <span class="token operator">=</span> <span class="token class-name static-context">Order</span><span class="token operator">::</span><span class="token function">shippedWithinDays</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Testing Scopes: Show how to write unit tests for scopes to ensure their correctness and avoid regressions.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Tests\Feature\PostTest.php</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">testScopePublished</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">factory</span><span class="token punctuation">(</span><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'published'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">factory</span><span class="token punctuation">(</span><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'published'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$publishedPosts</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">published</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">$publishedPosts</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Source: https://arjunamrutiya.medium.com/mastering-laravel-scope-a-comprehensive-guide-with-code-examples-daa54a4ee633</p> <h2 id="snippets"><a href="#snippets" class="header-anchor">#</a> Snippets</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopePublished</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'published'</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeUnpublished</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'published'</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeDeleted</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">withTrashed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeToday</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">whereDate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token class-name static-context">Carbon</span><span class="token operator">::</span><span class="token function">today</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeYear</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">whereYear</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token class-name static-context">Carbon</span><span class="token operator">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeAdmin</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'admin'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeActive</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'status'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'active'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeByCategory</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$categoryId</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'category_id'</span><span class="token punctuation">,</span> <span class="token variable">$categoryId</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopePublishedBetween</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$startDate</span><span class="token punctuation">,</span> <span class="token variable">$endDate</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">whereBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'published_at'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">$startDate</span><span class="token punctuation">,</span> <span class="token variable">$endDate</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">published</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">deleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$activeUsers</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$categoryProducts</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">byCategory</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$postsBetweenDates</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">publishedBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'2023-01-01'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'2023-07-31'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="new"><a href="#new" class="header-anchor">#</a> New</h2> <h3 id="before"><a href="#before" class="header-anchor">#</a> Before</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">scopePopular</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Builder</span> <span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
<span class="token punctuation">{</span>
    <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'votes'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="after-v12-x"><a href="#after-v12-x" class="header-anchor">#</a> After v12.x</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Attributes<span class="token punctuation">\</span>Scope</span><span class="token punctuation">;</span>

<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Scope</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">popular</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Builder</span> <span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
<span class="token punctuation">{</span>
    <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'votes'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/25/2025, 07:38:10</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/snippets/php/laravel/database/model.html" class="prev">
        Model
      </a></span> <span class="next"><a href="/snippets/php/laravel/database/queries.html">
        Queries
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/snippets/assets/js/app.b11af655.js" defer></script><script src="/snippets/assets/js/2.95ae72b9.js" defer></script><script src="/snippets/assets/js/1.4bee94c0.js" defer></script><script src="/snippets/assets/js/62.0af441dd.js" defer></script>
  </body>
</html>
